

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Observations &mdash; MONET  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Models" href="models.html" />
    <link rel="prev" title="MONET XArray Accessor" href="monet-accessor.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/MONET-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="why-monet.html">Overview: Why MONET?</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="monet-accessor.html">MONET XArray Accessor</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Observations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#airnow">AirNow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#available-measurements">Available Measurements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#epa-aqs">EPA AQS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Available Measurements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loading-multiple-measurements">Loading Multiple Measurements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loading-specfic-network">Loading Specfic Network</a></li>
<li class="toctree-l3"><a class="reference internal" href="#available-networks">Available Networks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#aeronet">AERONET</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Available Measurements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loading-aod-and-sda">Loading AOD and SDA</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#nadp">NADP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ntn">NTN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Available Measurements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#mdn">MDN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">Available Measurements</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#improve">IMPROVE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cems">CEMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#climate-reference-network">Climate Reference Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="#integrated-surface-database">Integrated Surface Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Available Measurements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#icartt">ICARTT</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="monet_wcoss.html">MONET on WCOSS</a></li>
</ul>
<p class="caption"><span class="caption-text">Help * Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">Get in touch</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html#api">API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MONET</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Observations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/observations.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="observations">
<h1>Observations<a class="headerlink" href="#observations" title="Permalink to this headline">¶</a></h1>
<p>This section will aid in how to use MONET to load observational datasets available.</p>
<p>First we will import several libraries to aid for in the future.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>          <span class="c1"># numpy</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>         <span class="c1"># pandas</span>
<span class="kn">from</span> <span class="nn">monet.obs</span> <span class="k">import</span> <span class="o">*</span>     <span class="c1"># observations from MONET</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> <span class="c1"># plotting</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>       <span class="c1"># better color palettes</span>
<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>  <span class="c1"># map projections</span>
<span class="kn">import</span> <span class="nn">cartopy.feature</span> <span class="k">as</span> <span class="nn">cfeature</span> <span class="c1"># politcal and geographic features</span>
</pre></div>
</div>
<div class="section" id="airnow">
<h2>AirNow<a class="headerlink" href="#airnow" title="Permalink to this headline">¶</a></h2>
<p>AirNow is the near realtime dataset for air composition and meteorology measurements.</p>
<blockquote>
<div>“The U.S. EPA AirNow program is the national repository of real time air quality data and forecasts for the United States. AirNow is the vehicle for providing timely Air Quality Index (AQI) information to the public, media outlets, other federal agencies and their applications, and to the research community. The system is managed by the U.S. EPA’s Office of Air Quality Planning and Standards Outreach and Information Division, Information Transfer Group in Research Triangle Park (RTP), North Carolina. AirNow is currently hosted and operated at a contractor facility, known as the AirNow Data Management Center (DMC), which currently resides outside of RTP.” - <a class="reference external" href="https://www.airnow.gov/index.cfm?action=ani.airnowUS">https://www.airnow.gov/index.cfm?action=ani.airnowUS</a></div></blockquote>
<p><a class="reference internal" href="#airnow">AirNow</a> data can be dowloaded from the Amazon S3 server and aggregated using the
monet.obs.airnow class.  For example,lets say that we want to look at data from
2018-05-01 to 2018-05-05.</p>
<p>Now we need to set the dates. We want hourly data so lets set the hourly flag</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2018-05-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2018-05-05&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now a simple one stop command to return the pandas <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
of the aggregated data on the given dates.  MONET reads the hourly data from AirNow.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">airnow</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="p">)</span>
</pre></div>
</div>
<p>This provides a structured <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>Some users may want to keep a local copy of the data and not have to retrive the data
each time they want to access the data.  There is a simple kwarg that can be used to
download the data, <em>download=True</em>.  By default, <em>download</em> is set to False.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">airnow</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span><span class="n">download</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>This format may be less intuitive.  It is the “long” ASCII format found in the files
where each index is a single record with a single variable and value.  This may be
incovinient but there are a helper function in <em>monet.utils.tools</em> to
assist in reshaping the pandas <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code> so that it can be more convenient.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">monet.utils.tools</span> <span class="k">import</span> <span class="n">unstack</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">unstack</span><span class="p">(</span><span class="n">df2</span><span class="p">)</span>
<span class="n">df2</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="available-measurements">
<h3>Available Measurements<a class="headerlink" href="#available-measurements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>O3 (OZONE)</li>
<li>PM2.5</li>
<li>PM10</li>
<li>SO2</li>
<li>NO2</li>
<li>CO</li>
<li>NO2</li>
<li>NOx</li>
<li>NO</li>
<li>Wind Speed and Direction (WS, WDIR)</li>
<li>Temperature (TEMP)</li>
<li>Relative Humidity (RH)</li>
<li>Solar Radiation (SRAD)</li>
</ul>
</div>
</div>
<div class="section" id="epa-aqs">
<h2>EPA AQS<a class="headerlink" href="#epa-aqs" title="Permalink to this headline">¶</a></h2>
<p>MONET is able to use the EPA AQS data that is collected and reported on an hourly and daily time scale.</p>
<blockquote>
<div>“The Air Quality System (AQS) contains ambient air pollution data collected by EPA, state, local, and tribal air pollution control agencies from over thousands of monitors.  AQS also contains meteorological data, descriptive information about each monitoring station (including its geographic location and its operator), and data quality assurance/quality control information.  AQS data is used to:
assess air quality,
evaluate State Implementation Plans for non-attainment areas,
prepare reports for Congress as mandated by the Clean Air Act.” - <a class="reference external" href="https://www.epa.gov/aqs">https://www.epa.gov/aqs</a></div></blockquote>
<p>We will begin by loading hourly ozone concentrations from 2018.  The EPA AQS data
is seperated into yearly files and seperate files for hourly and daily data.  The
files are also seperated by which variable is measured.  For instance, hourly ozone files
for the entire year of 2018 are found in <a class="reference external" href="https://aqs.epa.gov/aqsweb/airdata/hourly_44201_2018.zip">https://aqs.epa.gov/aqsweb/airdata/hourly_44201_2018.zip</a>.
We will first load a single variable and then add multiple later on.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#first determine the dates</span>
<span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2018-12-31&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">)</span>
<span class="c1"># load the data</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">aqs</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;OZONE&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>If you would rather daily data to get the 8HR max ozone concentration or daily maximum
concentration you can add the <em>daily</em> kwarg.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">aqs</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;OZONE&#39;</span><span class="p">],</span> <span class="n">daily</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>As in AirNow you can download the data to the local disk using the <em>download</em></p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">aqs</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;OZONE&#39;</span><span class="p">],</span> <span class="n">daily</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="id1">
<h3>Available Measurements<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>O3 (OZONE)</li>
<li>PM2.5 (PM2.5)</li>
<li>PM2.5_frm (PM2.5)</li>
<li>PM10</li>
<li>SO2</li>
<li>NO2</li>
<li>CO</li>
<li>NONOxNOy</li>
<li>VOC</li>
<li>Speciated PM (SPEC)</li>
<li>Speciated PM10 (PM10SPEC)</li>
<li>Wind Speed and Direction (WIND, WS, WDIR)</li>
<li>Temperature (TEMP)</li>
<li>Relative Humidity and Dew Point Temperature (RHDP)</li>
</ul>
</div>
<div class="section" id="loading-multiple-measurements">
<h3>Loading Multiple Measurements<a class="headerlink" href="#loading-multiple-measurements" title="Permalink to this headline">¶</a></h3>
<p>Let’s load variables PM10 and OZONE using hourly data to get an idea of how to get multiple variables:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">aqs</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;OZONE&#39;</span><span class="p">,</span><span class="s1">&#39;PM10&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="loading-specfic-network">
<h3>Loading Specfic Network<a class="headerlink" href="#loading-specfic-network" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you may want to load a specific network that is available in the AQS data
files.  For instance, lets load data from the Chemical Speciation Network (CSN; <a class="reference external" href="https://www3.epa.gov/ttnamti1/speciepg.html">https://www3.epa.gov/ttnamti1/speciepg.html</a>).
As of writting this tutorial we will load the 2017 data as it is complete.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2017-01-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">aqs</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span><span class="n">param</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;SPEC&#39;</span><span class="p">],</span> <span class="n">network</span><span class="o">=</span><span class="s1">&#39;CSN&#39;</span><span class="p">,</span> <span class="n">daily</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="available-networks">
<h3>Available Networks<a class="headerlink" href="#available-networks" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>NCORE (<a class="reference external" href="https://www3.epa.gov/ttn/amtic/ncore.html">https://www3.epa.gov/ttn/amtic/ncore.html</a>)</li>
<li>CSN (<a class="reference external" href="https://www3.epa.gov/ttnamti1/speciepg.html">https://www3.epa.gov/ttnamti1/speciepg.html</a>)</li>
<li>CASTNET (<a class="reference external" href="https://www.epa.gov/castnet">https://www.epa.gov/castnet</a>)</li>
<li>IMPROVE (<a class="reference external" href="http://vista.cira.colostate.edu/Improve/">http://vista.cira.colostate.edu/Improve/</a>)</li>
<li>PAMS (<a class="reference external" href="https://www3.epa.gov/ttnamti1/pamsmain.html">https://www3.epa.gov/ttnamti1/pamsmain.html</a>)</li>
<li>SCHOOL AIR TOXICS (<a class="reference external" href="https://www3.epa.gov/ttnamti1/airtoxschool.html">https://www3.epa.gov/ttnamti1/airtoxschool.html</a>)</li>
<li>NEAR ROAD (NO2; <a class="reference external" href="https://www3.epa.gov/ttn/amtic/nearroad.html">https://www3.epa.gov/ttn/amtic/nearroad.html</a>)</li>
<li>NATTS (<a class="reference external" href="https://www3.epa.gov/ttnamti1/natts.html">https://www3.epa.gov/ttnamti1/natts.html</a>)</li>
</ul>
</div>
</div>
<div class="section" id="aeronet">
<h2>AERONET<a class="headerlink" href="#aeronet" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>“The AERONET (AErosol RObotic NETwork) project is a federation of ground-based
remote sensing aerosol networks established by NASA and PHOTONS (PHOtométrie pour le Traitement Opérationnel de Normalisation Satellitaire; Univ. of Lille 1, CNES, and CNRS-INSU)
and is greatly expanded by networks (e.g., RIMA, AeroSpan, AEROCAN, and CARSNET) and collaborators from national agencies, institutes, universities, individual scientists, and partners. Fo more than 25 years, the project has provided long-term, continuous and readily accessible public domain database of aerosol optical, microphysical and radiative properties for aerosol research and characterization, validation of satellite retrievals, and synergism with other databases. The network imposes standardization of instruments, calibration, processing and distribution.</p>
<p>AERONET collaboration provides globally distributed observations of spectral aerosol optical depth (AOD), inversion products, and precipitable water in diverse aerosol regimes. Version 3 AOD data are computed for three data quality levels: Level 1.0 (unscreened), Level 1.5 (cloud-screened and quality controlled), and Level 2.0 (quality-assured). Inversions, precipitable water, and other AOD-dependent products are derived from these levels and may implement additional quality checks. ” -<a class="reference external" href="https://aeronet.gsfc.nasa.gov">https://aeronet.gsfc.nasa.gov</a></p>
</div></blockquote>
<p>MONET uses the AERONET web services to access data. All data products available through
their web service portal is available in MONET except for the raw sky scans.  This includes the AOD and SSA as well
as the inversion products.</p>
<div class="section" id="id2">
<h3>Available Measurements<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="colwidths-given docutils" id="id6">
<caption><span class="caption-text">AOD and SDA Measurements</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Product</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>AOD10</td>
<td>Aerosol Optical Depth Level 1.0</td>
</tr>
<tr class="row-odd"><td>AOD15</td>
<td>Aerosol Optical Depth Level 1.5</td>
</tr>
<tr class="row-even"><td>AOD20</td>
<td>Aerosol Optical Depth Level 2.0</td>
</tr>
<tr class="row-odd"><td>AOD15</td>
<td>Aerosol Optical Depth Level 1.5</td>
</tr>
<tr class="row-even"><td>SDA10</td>
<td>SDA Retrieval Level 1.0</td>
</tr>
<tr class="row-odd"><td>SDA15</td>
<td>SDA Retrieval Level 1.5</td>
</tr>
<tr class="row-even"><td>SDA20</td>
<td>SDA Retrieval Level 2.0</td>
</tr>
<tr class="row-odd"><td>TOT10</td>
<td>Total Optical Depth based on AOD Level 1.0 (all points only)</td>
</tr>
<tr class="row-even"><td>TOT15</td>
<td>Total Optical Depth based on AOD Level 1.5 (all points only)</td>
</tr>
<tr class="row-odd"><td>TOT20</td>
<td>Total Optical Depth based on AOD Level 2.0 (all points only)</td>
</tr>
</tbody>
</table>
<table border="1" class="colwidths-given docutils" id="id7">
<caption><span class="caption-text">Inversion Products</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Product</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SIZ</td>
<td>Size distribution</td>
</tr>
<tr class="row-odd"><td>RIN</td>
<td>Refractive indicies (real and imaginary)</td>
</tr>
<tr class="row-even"><td>CAD</td>
<td>Coincident AOT data with almucantar retrieval</td>
</tr>
<tr class="row-odd"><td>VOL</td>
<td>Volume concentration, volume mean radius, effective radius and standard deviation</td>
</tr>
<tr class="row-even"><td>TAB</td>
<td>AOT absorption</td>
</tr>
<tr class="row-odd"><td>AOD</td>
<td>AOT extinction</td>
</tr>
<tr class="row-even"><td>SSA</td>
<td>Single scattering albedo</td>
</tr>
<tr class="row-odd"><td>ASY</td>
<td>Asymmetry factor</td>
</tr>
<tr class="row-even"><td>FRC</td>
<td>Radiative Forcing</td>
</tr>
<tr class="row-odd"><td>LID</td>
<td>Lidar and Depolarization Ratios</td>
</tr>
<tr class="row-even"><td>FLX</td>
<td>Spectral flux</td>
</tr>
<tr class="row-odd"><td>ALL</td>
<td>All of the above retrievals (SIZ to FLUX) in one file</td>
</tr>
<tr class="row-even"><td>PFN*</td>
<td>Phase function (available for only all points data format: AVG=10)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="loading-aod-and-sda">
<h3>Loading AOD and SDA<a class="headerlink" href="#loading-aod-and-sda" title="Permalink to this headline">¶</a></h3>
<p>Aeronet is global data so we are going to look at a single day to speed this along.
First we need to create a datetime array</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2017-09-25&#39;</span><span class="p">,</span><span class="n">end</span><span class="o">=</span><span class="s1">&#39;2017-09-26&#39;</span><span class="p">,</span><span class="n">freq</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now lets assume that we want to read the Aerosol Optical Depth Level 1.5 data that is
cloud-screened and quality controlled.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">aeroent</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="o">=</span><span class="n">dates</span><span class="p">,</span> <span class="n">product</span><span class="o">=</span><span class="s1">&#39;AOD15&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>Now sometimes you want only data over a specific region.  To do this lets define a
latitude longitude box <em>[latmin,lonmin,latmax,lonmax]</em> over northern Africa</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">aeroent</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="o">=</span><span class="n">dates</span><span class="p">,</span> <span class="n">product</span><span class="o">=</span><span class="s1">&#39;AOD15&#39;</span><span class="p">,</span> <span class="n">latlonbox</span><span class="o">=</span><span class="p">[</span><span class="mf">2.</span><span class="p">,</span><span class="o">-</span><span class="mi">21</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">37</span><span class="p">])</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span><span class="s1">&#39;longitude&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
<p>To download inversion products you must supply the <em>inv_type</em> kwarg.  It accepts either
“ALM15” or “ALM20” from the AERONET web services.  Lets get the size distribution
from data over northern Africa</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">aeroent</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="o">=</span><span class="n">dates</span><span class="p">,</span> <span class="n">product</span><span class="o">=</span><span class="s1">&#39;SIZ&#39;</span><span class="p">,</span> <span class="n">latlonbox</span><span class="o">=</span><span class="p">[</span><span class="mf">2.</span><span class="p">,</span><span class="o">-</span><span class="mi">21</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">37</span><span class="p">],</span> <span class="n">inv_type</span><span class="o">=</span><span class="s1">&#39;ALM15&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="nadp">
<h2>NADP<a class="headerlink" href="#nadp" title="Permalink to this headline">¶</a></h2>
<p>NADP is a composed of five regional networks; NTN, AIRMoN, AMoN, AMNet, and MDN.
MONET allows you to read data from any of the five networks with a single call by
specifying the wanted network.</p>
<p>To add data from any of the networks it is a simple call using the nadp object.  As
an example, to load data from the NTN network the call would look like:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">nadp</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span> <span class="n">network</span><span class="o">=</span><span class="s1">&#39;NTN&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To read data from another network simply replace the network with the name of the
wanted network.  The network name must be a string but is case insensitive.</p>
<div class="section" id="ntn">
<h3>NTN<a class="headerlink" href="#ntn" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>“The NTN is the only network providing a long-term record of precipitation chemistry across the United States.</p>
<p>Sites predominantly are located away from urban areas and point sources of pollution. Each site has a precipitation
chemistry collector and gage. The automated collector ensures that the sample is exposed only during precipitation (wet-only-sampling).”
- <a class="reference external" href="http://nadp.slh.wisc.edu/NTN/">http://nadp.slh.wisc.edu/NTN/</a></p>
</div></blockquote>
<div class="section" id="id3">
<h4>Available Measurements<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>H+ (ph)</li>
<li>Ca2+ (ca)</li>
<li>Mg2+ (mg)</li>
<li>Na+ (na)</li>
<li>K+ (k)</li>
<li>SO42- (so4)</li>
<li>NO3- (no3)</li>
<li>Cl- (cl)</li>
<li>NH4+ (nh4)</li>
</ul>
</div>
</div>
<div class="section" id="mdn">
<h3>MDN<a class="headerlink" href="#mdn" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>“The MDN is the only network providing a longterm record of total mercury (Hg) concentration and deposition in precipitation in the United States and Canada. All MDN sites follow standard procedures and have uniform precipitation chemistry collectors and gages. The automated collector has the same basic design as the NTN collector but is modified to preserve mercury. Modifications include a glass funnel, connecting tube, bottle for collecting samples, and an insulated enclosure to house this sampling train. The funnel and connecting tube reduce sample exposure to the open atmosphere and limit loss of dissolved mercury. As an additional sample preservation measure, the collection bottle is charged with 20 mL of a one percent hydrochloric acid solution.”
- <a class="reference external" href="http://nadp.slh.wisc.edu/MDN/">http://nadp.slh.wisc.edu/MDN/</a></div></blockquote>
<div class="section" id="id4">
<h4>Available Measurements<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>net concentration of methyl mercury in ng/L (conc)</li>
<li>precipitation amount (in inches) reported by the raingage for the entire sampling period. (raingage)</li>
<li>Mg2+ (mg)</li>
<li>Na+ (na)</li>
<li>K+ (k)</li>
<li>SO42- (so4)</li>
<li>NO3- (no3)</li>
<li>Cl- (cl)</li>
<li>NH4+ (nh4)</li>
</ul>
</div>
</div>
</div>
<div class="section" id="improve">
<h2>IMPROVE<a class="headerlink" href="#improve" title="Permalink to this headline">¶</a></h2>
<p>to do…</p>
</div>
<div class="section" id="cems">
<h2>CEMS<a class="headerlink" href="#cems" title="Permalink to this headline">¶</a></h2>
<p>Data from  Continuous Emissions Monitoring Systems (CEMS)</p>
<p>“A continuous emission monitoring system (CEMS) is the total equipment necessary for the
determination of a gas or particulate matter concentration or emission rate……CEMS are required
under some of the EPA regulations…” - <a class="reference external" href="https://www.epa.gov/emc/emc-continuous-emission-monitoring-systems">https://www.epa.gov/emc/emc-continuous-emission-monitoring-systems</a></p>
<p>The data is obtained from <a class="reference external" href="ftp://newftp.epa.gov/DmDnLoad/emissions/">ftp://newftp.epa.gov/DmDnLoad/emissions/</a></p>
<p>First pick the dates and states you wish to retrieve data for.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2012-01-01&#39;</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2012-12-31&#39;</span><span class="p">)]</span>
<span class="n">states</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;md&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>To return the pandas <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code> with the data</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">monet.obs</span> <span class="k">import</span> <span class="n">cems_mod</span>
<span class="n">cems</span> <span class="o">=</span> <span class="n">cems_mod</span><span class="o">.</span><span class="n">CEMS</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">cems</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span> <span class="n">states</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Each row in the dataframe contains the orispl code, latitude, longitude and station name of the emissions source.
It also contains data on emissions of various gasses and particulates.
To see what data is in the DataFrame simply output the column header values</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">colums</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<p>The CEMS class also contains the method  cemspivot which will return a pivot table
(also <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) in which each column is a time series
of the specified variable for each orispl code (emission source). The time is given by the
row index and the column header is the orispl code. The columns may also be broken down by unit id if
there is more than one unit and unitid is set to True.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pivot_df</span> <span class="o">=</span> <span class="n">cems</span><span class="o">.</span><span class="n">cemspivot</span><span class="p">(</span><span class="s1">&#39;so2_lbs&#39;</span><span class="p">,</span> <span class="n">unitid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="climate-reference-network">
<h2>Climate Reference Network<a class="headerlink" href="#climate-reference-network" title="Permalink to this headline">¶</a></h2>
<p>to do…..</p>
</div>
<div class="section" id="integrated-surface-database">
<h2>Integrated Surface Database<a class="headerlink" href="#integrated-surface-database" title="Permalink to this headline">¶</a></h2>
<p>“The Integrated Surface Database consists of global hourly and synoptic observations compiled
from numerous sources into a single common ASCII format and common data model”-
<a class="reference external" href="https://www.ncdc.noaa.gov/isd">https://www.ncdc.noaa.gov/isd</a></p>
<p>Data is retrieved with the ISH class in the ish_mod.py file.
Currently, the text files are downloaded into the working directory.
There is no option not to download the files.</p>
<p>First pick the dates and area you want to retrieve data for.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2012-01-01&#39;</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2012-12-31&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">area</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">105.0</span><span class="p">,</span> <span class="o">-</span><span class="mi">97</span><span class="p">,</span> <span class="mf">44.5</span><span class="p">,</span> <span class="mf">49.5</span><span class="p">]</span>
</pre></div>
</div>
<p>Now a simple one stop command to return the pandas <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>
of the data on the given dates.  MONET reads the hourly data from the ISD LITE database.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">monet.obs</span> <span class="k">import</span> <span class="n">ish</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">ish</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span> <span class="n">country</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">area</span><span class="p">,</span> <span class="n">resample</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Or you can create your own instance of the ISH class.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">monet.obs</span> <span class="k">import</span> <span class="n">ish_mod</span>
<span class="n">metdata</span> <span class="o">=</span> <span class="n">ish_mod</span><span class="o">.</span><span class="n">ISH</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">metdata</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span> <span class="n">country</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">area</span><span class="p">,</span> <span class="n">resample</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>To see what data is in the DataFrame simply output the column header values</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">colums</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="id5">
<h3>Available Measurements<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>dew point (dpt)</li>
<li>temperature (t)</li>
<li>visibility (vsb)</li>
<li>wind speed (ws)</li>
<li>wind direction (wdir)</li>
</ul>
<p>The ISD (ISH) database contains latitude, longitude, station name, station id,
time, dew point (dpt), temperature (t), visibility (vsb),
wind speed (ws), wind direction (wdir), as well as various quality flags.</p>
</div>
</div>
<div class="section" id="icartt">
<h2>ICARTT<a class="headerlink" href="#icartt" title="Permalink to this headline">¶</a></h2>
<p>MONET is capable of reading the NASA ICARTT data format (<a class="reference external" href="https://go.nasa.gov/2F4yQWI">https://go.nasa.gov/2F4yQWI</a>).  Many field
campaigns save data in ICARTT format.  Methods are available to combine flight data.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">monet.obs</span> <span class="k">import</span> <span class="n">icartt</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">icartt</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will return a xarray.Dataset.  If you would prefer a pandas.DataFrame you
can use the icartt.get_data function.  This will try to automatically rename a
few columns like latitude and longitude and time from the data array and return
a monet compatible pandas.DataFrame.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">icartt</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="models.html" class="btn btn-neutral float-right" title="Models" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="monet-accessor.html" class="btn btn-neutral float-left" title="MONET XArray Accessor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Barry Baker

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>